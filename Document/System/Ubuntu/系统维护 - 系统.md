## 查看进程

### ps命令 - 最常用的进程查看工具
```bash
# 查看当前用户的进程
ps aux

# 查看特定用户的进程
ps -u username

# 查看特定进程（如nginx）
ps aux | grep nginx

# 查看进程树
ps auxf
```

### **top命令** - 实时进程监控
```bash
# 实时查看系统进程
top

# 按内存使用排序（在top界面按 M）
# 按CPU使用排序（在top界面按 P）
# 退出top（按 q）
```

### htop命令 - 增强版top（需安装）
```bash
# 安装
sudo apt install htop

# 使用
htop
```

### pstree命令 - 以树状图显示进程
```bash
# 安装
sudo apt
```

## Hostname修改

### 方法一：使用 `hostnamectl` 命令（推荐）

这是 Ubuntu 17.04 及以后版本最推荐的方法：

```bash
# 查看当前主机名
hostnamectl

# 临时修改主机名（重启后失效）
sudo hostnamectl set-hostname 新主机名 --transient

# 永久修改静态主机名
sudo hostnamectl set-hostname 新主机名

# 修改漂亮主机名（用于显示）
sudo hostnamectl set-hostname "漂亮名称" --pretty
```

### 方法二：修改 `/etc/hostname` 文件

```bash
# 1. 编辑 hostname 文件
sudo nano /etc/hostname

# 或使用 echo
sudo echo "new-hostname" > /etc/hostname

# 2. 更新当前会话的主机名
sudo hostname new-hostname
```

### 验证修改

```bash
# 查看当前主机名
hostname

# 或
hostnamectl status

# 或
cat /etc/hostname
```

## 密码修改

### 当前登录用户

打开终端，直接输入以下命令：

```bash
passwd
```

系统会提示你输入**当前密码**，验证通过后，再输入**两次新密码**即可。

### 其他用户

如果你有管理员权限（sudo），可以修改其他用户的密码：

```bash
sudo passwd 用户名
```

例如，修改用户 `john` 的密码：

```bash
sudo passwd john
```

之后输入**两次新密码**（无需知道该用户原密码）。

### 强制用户下次登录修改密码

```bash
sudo passwd --expire 用户名
```

这样该用户下次登录时会被强制要求设置新密码。

### 修改 root 用户密码

如果 root 账户已启用（默认禁用）：

```bash
sudo passwd root
```

## 校准时间

### 安装`tzdata`

```sh
sudo apt install tzdata
```

### 设置时区

```sh
sudo timedatectl set-timezone Asia/Shanghai
```

### 验证时间

```sh
timedatectl
```

## 环境变量

### 临时环境变量

```bash
# 直接设置（仅当前会话有效）
export PATH="/usr/local/custom/bin:$PATH"
export MY_VAR="value"

# 查看环境变量
echo $PATH
printenv MY_VAR
```

### 级别环境变量

#### 用户级

~/.bashrc（推荐用于bash用户）

```bash
# 编辑配置文件
nano ~/.bashrc

# 添加以下内容：
export PATH="$HOME/.local/bin:$PATH"
export JAVA_HOME="/usr/lib/jvm/java-11-openjdk-amd64"
export PATH="$JAVA_HOME/bin:$PATH"

# 添加别名
alias ll='ls -alF'

# 使配置立即生效
source ~/.bashrc
# 或
. ~/.bashrc
```

~/.profile 或 ~/.bash_profile

```bash
# 适用于登录shell
nano ~/.profile

# 添加环境变量
export CUSTOM_PATH="/opt/myapp/bin"
export PATH="$CUSTOM_PATH:$PATH"
```

#### 系统级环境变量

/etc/environment（系统范围，所有用户）

```bash
sudo nano /etc/environment

# 直接写入变量（不要使用export）
PATH="/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games"
JAVA_HOME="/usr/lib/jvm/default-java"
```

/etc/profile.d/

```bash
# 创建自定义配置文件
sudo nano /etc/profile.d/my_vars.sh

# 添加内容
export APP_HOME="/opt/myapplication"
export PATH="$APP_HOME/bin:$PATH"

# 设置权限
sudo chmod 644 /etc/profile.d/my_vars.sh
```

### 软件设置环境变量

#### 方法一：在软件安装目录创建env文件

```bash
# 创建配置脚本
sudo nano /opt/myapp/env.sh

# 内容示例
export MYAPP_HOME="/opt/myapp"
export PATH="$MYAPP_HOME/bin:$PATH"
export LD_LIBRARY_PATH="$MYAPP_HOME/lib:$LD_LIBRARY_PATH"

# 在.bashrc中加载
echo "source /opt/myapp/env.sh" >> ~/.bashrc
```

#### 方法二：使用符号链接

```bash
# 将可执行文件链接到系统PATH目录
sudo ln -s /opt/myapp/bin/myapp /usr/local/bin/myapp

# 或者链接到用户本地bin目录
ln -s /opt/myapp/bin/myapp ~/.local/bin/myapp
```

### 附录

#### 优先级顺序

```bash
1. /etc/environment → 系统环境变量
2. /etc/profile → 系统级shell配置
3. /etc/profile.d/*.sh → 系统级自定义配置
4. ~/.profile 或 ~/.bash_profile → 用户登录配置
5. ~/.bashrc → 用户交互式shell配置
```

1. **用户级配置优先**：尽量使用 `~/.bashrc` 或 `~/.profile`
2. **系统级配置**：使用 `/etc/profile.d/` 而非直接修改 `/etc/profile`
3. **PATH管理**：新路径加在前面（`$NEW_PATH:$PATH`）有更高优先级
4. **模块化管理**：为不同软件创建独立的配置文件
5. **及时生效**：修改后运行 `source ~/.bashrc` 或重新登录