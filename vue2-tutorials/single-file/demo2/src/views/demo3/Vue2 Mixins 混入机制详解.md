# Vue2 Mixins æ··å…¥æœºåˆ¶è¯¦è§£

## ä¸€ã€åŸºæœ¬æ¦‚å¿µ

Mixinsï¼ˆæ··å…¥ï¼‰æ˜¯ Vue2 ä¸­ç”¨äºåˆ†å‘ç»„ä»¶å¯å¤ç”¨åŠŸèƒ½çš„çµæ´»æ–¹å¼ã€‚ä¸€ä¸ªæ··å…¥å¯¹è±¡å¯ä»¥åŒ…å«ä»»æ„ç»„ä»¶é€‰é¡¹ï¼Œå½“ç»„ä»¶ä½¿ç”¨æ··å…¥å¯¹è±¡æ—¶ï¼Œæ‰€æœ‰æ··å…¥å¯¹è±¡çš„é€‰é¡¹å°†è¢«"æ··åˆ"è¿›å…¥ç»„ä»¶æœ¬èº«çš„é€‰é¡¹ã€‚

## äºŒã€ä»£ç ç¤ºä¾‹è§£æ

### 1. æ··å…¥å¯¹è±¡å®šä¹‰ (test1.js)
```javascript
export const test1 = {
  data() {
    return {
      username: "Bunny"  // å°†è¢«åˆå¹¶åˆ°ç»„ä»¶dataä¸­
    };
  },
  methods: {
    showMessage() {  // å°†è¢«åˆå¹¶åˆ°ç»„ä»¶methodsä¸­
      alert(`å±•ç¤ºæ¶ˆæ¯ï¼š${this.username}`);
    }
  }
};
```

### 2. ç»„ä»¶ä¸­ä½¿ç”¨æ··å…¥ (SchoolInfo.vue)
```html
<template>
  <div>
    <h2 @click="showMessage">å­¦ç”Ÿå§“å-showMessageï¼š{{ username }}</h2>
    <h2>å­¦ä¹ æ€§åˆ«ï¼š{{ sex }}</h2>
    <h2>å­¦ç”Ÿå¹´é¾„ï¼š{{ age + 1 }}</h2>
  </div>
</template>

<script>
import { test1 } from "../mixins/test1";

export default {
  name: "SchoolInfo",
  mixins: [test1],  // æ³¨å†Œæ··å…¥
  data() {
    return {
      username: "Bunny",  // ä¸æ··å…¥dataåˆå¹¶
      sex: "ğŸšº",
      age: 16
    };
  }
};
</script>
```

## ä¸‰ã€åˆå¹¶ç­–ç•¥è¯¦è§£

### 1. é€‰é¡¹åˆå¹¶è§„åˆ™
| é€‰é¡¹ç±»å‹     | åˆå¹¶ç­–ç•¥               | ç¤ºä¾‹ç»“æœ                     |
| ------------ | ---------------------- | ---------------------------- |
| data         | é€’å½’åˆå¹¶ï¼Œç»„ä»¶ä¼˜å…ˆ     | åŒåå±æ€§ä»¥ç»„ä»¶ä¸ºå‡†           |
| methods      | åˆå¹¶ï¼Œç»„ä»¶ä¼˜å…ˆ         | åŒåæ–¹æ³•è¦†ç›–                 |
| ç”Ÿå‘½å‘¨æœŸé’©å­ | åˆå¹¶ä¸ºæ•°ç»„ï¼Œæ··å…¥å…ˆæ‰§è¡Œ | éƒ½ä¼šè°ƒç”¨ï¼Œé¡ºåº: mixin â†’ ç»„ä»¶ |
| å…¶ä»–å¯¹è±¡å€¼   | ç»„ä»¶ä¼˜å…ˆ               | å¦‚components, directivesç­‰   |

### 2. åˆå¹¶è¿‡ç¨‹ç¤ºä¾‹
```javascript
// æ··å…¥data
{ username: "Bunny" }

// ç»„ä»¶data
{ 
  username: "Bunny",  // åŒåå±æ€§è¢«ä¿ç•™
  sex: "ğŸšº",
  age: 16 
}

// æœ€ç»ˆåˆå¹¶ç»“æœ
{
  username: "Bunny",  // æ¥è‡ªç»„ä»¶
  sex: "ğŸšº",         // æ¥è‡ªç»„ä»¶
  age: 16            // æ¥è‡ªç»„ä»¶
}
```

## å››ã€æœ€ä½³å®è·µ

### 1. å‘½åè§„èŒƒ
- æ··å…¥æ–‡ä»¶ä½¿ç”¨ `mixin-` å‰ç¼€ï¼ˆå¦‚ `mixin-logger.js`ï¼‰
- æ··å…¥å˜é‡ä½¿ç”¨ `mixin` åç¼€ï¼ˆå¦‚ `userMixin`ï¼‰
- é¿å…ä¸ç»„ä»¶å±æ€§å’Œæ–¹æ³•é‡å

### 2. ä½¿ç”¨å»ºè®®
- **é€‚åˆåœºæ™¯**ï¼š
  - å¤šä¸ªç»„ä»¶å…±äº«ç›¸åŒé€»è¾‘
  - åŠŸèƒ½æ¨¡å—è§£è€¦
  - æ’ä»¶å¼€å‘
  
- **é¿å…åœºæ™¯**ï¼š
  - è¿‡åº¦ä½¿ç”¨å¯¼è‡´ä»£ç éš¾ä»¥è¿½è¸ª
  - å¤æ‚çš„å¤šå±‚çº§æ··å…¥

### 3. å…¨å±€æ··å…¥
```javascript
// è°¨æ…ä½¿ç”¨ï¼ä¼šå½±å“æ‰€æœ‰Vueå®ä¾‹
Vue.mixin({
  created() {
    console.log('å…¨å±€æ··å…¥çš„createdé’©å­');
  }
});
```

## äº”ã€é«˜çº§ç”¨æ³•

### 1. è‡ªå®šä¹‰åˆå¹¶ç­–ç•¥
```javascript
Vue.config.optionMergeStrategies.myOption = (parent, child, vm) => {
  return child || parent;
};
```

### 2. æ··å…¥ç»„åˆ
```javascript
// featureMixin.js
export const featureMixin = {
  methods: {
    featureMethod() { /*...*/ }
  }
};

// ç»„ä»¶ä¸­ä½¿ç”¨å¤šä¸ªæ··å…¥
import { userMixin, featureMixin } from './mixins';
export default {
  mixins: [userMixin, featureMixin]
}
```

### 3. æ··å…¥ä¸æ’ä»¶ç»“åˆ
```javascript
// plugin.js
export default {
  install(Vue) {
    Vue.mixin({
      mounted() {
        console.log('æ¥è‡ªæ’ä»¶çš„æ··å…¥');
      }
    });
  }
};
```

## å…­ã€å¸¸è§é—®é¢˜

1. **å±æ€§å†²çª**ï¼š
   - æ•°æ®å¯¹è±¡ï¼šç»„ä»¶dataä¼˜å…ˆ
   - æ–¹æ³•ï¼šç»„ä»¶methodsä¼˜å…ˆ
   - é’©å­å‡½æ•°ï¼šéƒ½ä¼šæ‰§è¡Œï¼Œæ··å…¥çš„å…ˆæ‰§è¡Œ

2. **è°ƒè¯•æŠ€å·§**ï¼š
   ```javascript
   mounted() {
     console.log(this.$options); // æŸ¥çœ‹åˆå¹¶åçš„é€‰é¡¹
   }
   ```

3. **ä¸Vue3çš„åŒºåˆ«**ï¼š
   - Vue3 ä½¿ç”¨ Composition API æ›¿ä»£æ··å…¥
   - æä¾› `setup` å‡½æ•°æ›´å¥½åœ°ç»„ç»‡é€»è¾‘

## ä¸ƒã€æ›¿ä»£æ–¹æ¡ˆæ¯”è¾ƒ

| æ–¹æ¡ˆ            | ä¼˜ç‚¹           | ç¼ºç‚¹             |
| --------------- | -------------- | ---------------- |
| Mixins          | é€»è¾‘å¤ç”¨ç®€å•   | å‘½åå†²çªé£é™©     |
| é«˜é˜¶ç»„ä»¶        | æ˜ç¡®propsä¼ é€’  | ç»„ä»¶åµŒå¥—å±‚æ¬¡æ·±   |
| æ’ä»¶            | å…¨å±€åŠŸèƒ½æ‰©å±•   | è¿‡åº¦ä½¿ç”¨å½±å“æ€§èƒ½ |
| Composition API | æ›´å¥½çš„ä»£ç ç»„ç»‡ | ä»…Vue3æ”¯æŒ       |
